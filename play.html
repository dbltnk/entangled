<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Entangled</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div class="panel rules" id="rules-panel">
        <h1>ğŸŒ€ Entangled</h1>
        <p class="intro">A 2-player abstract strategy game inspired by <a
                href="https://en.wikipedia.org/wiki/Quantum_entanglement" target="_blank">quantum entanglement</a>.</p>

        <h2>ğŸ¯ Quick Start</h2>
        <p class="highlight">Place stones that appear simultaneously on <strong>both boards</strong>. Each symbol has a
            matching symbol on the other board.</p>
        <p>Build the largest connected groups you can! Your final score is the <em>sum of your largest group on each
                board</em>. Largest total wins!</p>

        <h2>ğŸ® Game Modes</h2>
        <div class="mode-section">
            <p><strong>ğŸ‘¥ Human vs Human</strong> - Play against a friend locally</p>
            <p><strong>ğŸ¤– Human vs AI</strong> - Test yourself against:</p>
            <ul class="ai-tiers">
                <li>ğŸŸ¢ <strong>Simple:</strong> Deterministic, Random</li>
                <li>ğŸŸ¡ <strong>Medium:</strong> Greedy, Defensive</li>
                <li>ğŸ”´ <strong>Strong:</strong> Minimax, Monte Carlo Tree Search</li>
            </ul>
        </div>


        <h2>ğŸ² Advanced Features</h2>
        <h2>âš–ï¸ Swap Rule</h2>
        <p class="highlight">After the first move, the second player can choose to <em>"swap"</em> - taking over the
            first player's stone as their own.</p>
        <p><em>Note:</em> This balances first-move advantage. Can be disabled in settings.</p>

        <h3>ğŸŒŒ Superposition Stones</h3>
        <p>Special stones that collapse to match the last placed stone when all adjacent spaces are filled.</p>
        <p><strong>Configure using:</strong></p>
        <ul class="feature-list">
            <li><code>A,B,C</code> - Place on specific spaces</li>
            <li><code>rng,rng</code> - Place randomly</li>
        </ul>

        <h3>ğŸ“‹ Board Configuration</h3>
        <ul class="feature-list">
            <li><strong>Size:</strong> Choose 4Ã—4 to 7Ã—7 boards</li>
            <li><strong>Layouts:</strong> Various board patterns for different gameplay styles</li>
            <li><strong>Starting Stones:</strong> Place stones before game start using:<br>
                <code>BE2,WK1</code> (Black on E2, White on K1)
            </li>
        </ul>

        <h3>âš™ï¸ AI Settings</h3>
        <ul class="feature-list">
            <li><strong>Thinking Time:</strong> For Minimax and MCTS (0.1-60 seconds)</li>
            <li><strong>Randomization:</strong> Optional RNG variants for unpredictable play</li>
        </ul>

        <h3>ğŸ¨ Display Options</h3>
        <ul class="feature-list">
            <li>ğŸ” Toggle matching space highlights</li>
            <li>ğŸ“Š Show/hide group sizes and largest groups</li>
            <li>ğŸ¯ Display live scores</li>
            <li>ğŸª Show/hide icons and symbols</li>
        </ul>

        <h2>ğŸ’¡ Strategy Tips</h2>
        <ul class="strategy-list">
            <li>ğŸ¤” Think about both boards. A move good on one might be bad on the other.</li>
            <li>ğŸ”— Look for opportunities to connect groups across multiple spaces.</li>
            <li>ğŸŒŸ Use superposition stones strategically for unexpected connections.</li>
            <li>âš¡ Consider swapping if the first move creates strong positions.</li>
        </ul>
    </div>

    <div class="game-container">
        <div class="boards panel">
            <div class="board-container">
                <div class="board" id="board1"></div>
            </div>
            <div class="board-container">
                <div class="board" id="board2"></div>
            </div>
        </div>

        <div class="panel controls">
            <div class="control-group settings-group">
                <div class="settings-header">
                    <h3><span>âš™ï¸</span> Settings</h3>
                    <button id="toggle-settings" class="toggle-settings">
                        <span class="toggle-icon">â–¼</span>
                    </button>
                </div>
                <div class="settings-content hidden">
                    <div class="setting-item">
                        <input type="checkbox" id="setting-hover" checked>
                        <label for="setting-hover">Highlight matching tiles</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-groups" checked>
                        <label for="setting-groups">Show largest group highlights</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-size" checked>
                        <label for="setting-size">Show group size numbers</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-score" checked>
                        <label for="setting-score">Show live score</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-currentPlayer" checked>
                        <label for="setting-currentPlayer">Show current player</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-icons" checked>
                        <label for="setting-icons">Show icons</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="setting-symbols">
                        <label for="setting-symbols">Show symbols</label>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div id="swap-button-container" style="display: none;">
                    <button id="swap-first-move" class="swap-button">
                        <span>ğŸ”„</span> Take Over First Move
                    </button>
                </div>
                <div class="stats">
                    <div class="stats-row">
                        <span id="score-display">Black: 0 - White: 0</span>
                    </div>
                    <div class="stats-row">
                        <span id="current-player-display"></span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="size-select">
                    <label for="board-size" class="field-label">Board Dimensions</label>
                    <select id="board-size">
                        <option value="4">4Ã—4</option>
                        <option value="5">5Ã—5</option>
                        <option value="6">6Ã—6</option>
                        <option value="7" selected>7Ã—7</option>
                    </select>
                </div>

                <div class="player-select">
                    <label for="board1-select" class="field-label">First Board Layout</label>
                    <div class="select-with-button">
                        <select id="board1-select">
                        </select>
                        <button id="custom-board1-btn" class="custom-board-btn" title="Add custom board">+</button>
                    </div>
                </div>

                <div class="player-select">
                    <label for="board2-select" class="field-label">Second Board Layout</label>
                    <div class="select-with-button">
                        <select id="board2-select">
                        </select>
                        <button id="custom-board2-btn" class="custom-board-btn" title="Add custom board">+</button>
                    </div>
                </div>

                <div class="setup-input">
                    <label for="starting-config" class="field-label">Starting Stone Configuration</label>
                    <input type="text" id="starting-config" placeholder="e.g., BE2,WK1" />
                </div>

                <div class="setup-input">
                    <label class="field-label" for="superposition">Superposition Stone Configuration</label>
                    <input type="text" id="superposition" placeholder="Example: 1A,2B,3C">
                </div>

                <div class="swap-rule-container">
                    <input type="checkbox" id="swap-rule" checked>
                    <label for="swap-rule">Enable Swap Rule</label>
                </div>

                <div class="player-select">
                    <label class="field-label" for="black-player">Black Player (First)</label>
                    <div class="player-controls" id="black-player-controls">
                        <select id="black-player">
                            <option value="human">Human</option>
                            <option value="remote">Remote</option>
                            <option value="deterministic">Deterministic</option>
                            <option value="random">Random</option>
                            <option value="greedy">Greedy (deterministic)</option>
                            <option value="greedy-some-rng">Greedy with RNG</option>
                            <option value="defensive">Defensive (deterministic)</option>
                            <option value="defensive-some-rng">Defensive with RNG</option>
                            <option value="minimax">Minimax (deterministic)</option>
                            <option value="minimax-some-rng">Minimax with RNG</option>
                            <option value="mcts">Monte Carlo Tree Search</option>
                        </select>
                        <div class="thinking-time-container">
                            <label class="field-label" for="black-thinking-time">Time</label>
                            <div class="thinking-time-input-container">
                                <input type="number" id="black-thinking-time" class="thinking-time-input" value="1.0"
                                    min="0.1" max="60.0" step="0.1">
                                <label>sec</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="player-select">
                    <label class="field-label" for="white-player">White Player (Second)</label>
                    <div class="player-controls" id="white-player-controls">
                        <select id="white-player">
                            <option value="human">Human</option>
                            <option value="remote">Remote</option>
                            <option value="deterministic">Deterministic</option>
                            <option value="random">Random</option>
                            <option value="greedy">Greedy (deterministic)</option>
                            <option value="greedy-some-rng">Greedy with RNG</option>
                            <option value="defensive">Defensive (deterministic)</option>
                            <option value="defensive-some-rng">Defensive with RNG</option>
                            <option value="minimax">Minimax (deterministic)</option>
                            <option value="minimax-some-rng">Minimax with RNG</option>
                            <option value="mcts">Monte Carlo Tree Search</option>
                        </select>
                        <div class="thinking-time-container">
                            <label class="field-label" for="white-thinking-time">Time</label>
                            <div class="thinking-time-input-container">
                                <input type="number" id="white-thinking-time" class="thinking-time-input" value="1.0"
                                    min="0.1" max="60.0" step="0.1">
                                <label>sec</label>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="start-game"><span>ğŸ”„</span> Start Game</button>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>

    <!-- Custom Board Modal -->
    <div id="custom-board-modal" class="modal">
        <div class="modal-content">
            <h3>Add Custom Board</h3>
            <p>Paste your board configuration below:</p>
            <textarea id="custom-board-input" rows="10" placeholder="board1706420738only: {
    name: 'evolved second',
    grid: [
        ['.', '.', 'D', 'U', 'E', '.', '.'],
        ['.', 'S', 'B', 'K', 'A', 'R', '.'],
        ['I', 'Z', 'W', '3', 'Y', '2', 'J'],
        ['M', 'P', 'C', '.', '1', 'X', 'G'],
        ['4', 'F', '0', '7', 'O', '5', 'H'],
        ['.', 'N', '9', '8', 'Q', '6', '.'],
        ['.', '.', 'T', 'L', 'V', '.', '.'],
    ]
},"></textarea>
            <div class="modal-buttons">
                <button id="custom-board-cancel">Cancel</button>
                <button id="custom-board-save">Save</button>
            </div>
        </div>
    </div>

</body>

</html>